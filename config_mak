#!/usr/bin/perl
open(T,"<config.h") || die;
print "# Auto-generated from config.h do not modify\n";
while (my $line = <T>) {
	chomp $line;
	next unless $line =~ s/^#define +//;
	next unless $line =~ m/^(HAVE|ENABLE|STATIC)_/;
	$line =~ s/ /=/;
	print "$line\n";
}
close(T);

# then we need these macros to control the build directory
print "rel_srcdir=\$(subst \$(abs_top_srcdir)/,,\$(abs_srcdir))\n";
print "ifneq (\$(target_subdir),)\n";
print "abs_exe_dir=\$(abs_top_builddir)/build/\$(rel_srcdir)/\$(target_subdir)/exe\n";
print "abs_obj_dir=\$(abs_top_builddir)/build/\$(rel_srcdir)/\$(target_subdir)/obj\n";
print "abs_lib_dir=\$(abs_top_builddir)/build/\$(rel_srcdir)/\$(target_subdir)/lib\n";
print "endif\n";

